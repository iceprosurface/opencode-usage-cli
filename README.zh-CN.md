[English](README.md) | [ä¸­æ–‡](README.zh-CN.md)

# OpenCode Usage

ä¸€ä¸ªç”¨äºåˆ†æ OpenCode ä¼šè¯ä½¿ç”¨æƒ…å†µå’Œæˆæœ¬çš„ CLI å·¥å…·ï¼Œç±»ä¼¼äº ccusageã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š è·¨ä¼šè¯åˆ†æ token ä½¿ç”¨æƒ…å†µ
- ğŸ’° æŒ‰æ¨¡å‹å’Œä¼šè¯è¿½è¸ªæˆæœ¬
- ğŸ“… æ¯æ—¥å’Œæ¯æœˆä½¿ç”¨æŠ¥å‘Š
- ğŸ“ˆ å¸¦ç´§å‡‘æ¨¡å¼çš„å“åº”å¼è¡¨æ ¼
- ğŸ” æŒ‰æ—¶é—´èŒƒå›´ã€æ¨¡å‹å’Œé¡¹ç›®è·¯å¾„è¿‡æ»¤
- ğŸ¯ ç‰¹å®šç›®å½•çš„ç²¾ç¡®è·¯å¾„åŒ¹é…
- ğŸ—ï¸ æŒ‰é¡¹ç›®/å®ä¾‹åˆ†ç»„ä½¿ç”¨æƒ…å†µ
- ğŸ“‹ å¯¼å‡ºç»“æœä¸º JSON æˆ– CSV æ ¼å¼
- ğŸ¯ æŸ¥çœ‹è¯¦ç»†çš„ä¼šè¯æ˜ç»†

## å®‰è£…

### é€šè¿‡ npm å…¨å±€å®‰è£…

```bash
npm install -g opencode-usage-cli
```

### æˆ–æœ¬åœ°å®‰è£…

```bash
npm install opencode-usage-cli
```

## ä½¿ç”¨æ–¹æ³•

å…¨å±€å®‰è£…åï¼Œ`opencode-usage` å‘½ä»¤å°†å¯ç”¨ã€‚

### åˆ†æä½¿ç”¨æƒ…å†µï¼ˆæœ€è¿‘ 7 å¤©ï¼‰

```bash
opencode-usage analyze
```

### æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤

```bash
# æœ€è¿‘ 30 å¤©
opencode-usage analyze -d 30

# æœ€è¿‘ 90 å¤©
opencode-usage analyze --days 90
```

### æŒ‰æ¨¡å‹è¿‡æ»¤

```bash
# ä»… Claude Sonnet
opencode-usage analyze -m sonnet

# ä»… Haiku
opencode-usage analyze --model haiku
```

### æŒ‰é¡¹ç›®è·¯å¾„è¿‡æ»¤

```bash
# æ¨¡å¼åŒ¹é…ï¼ˆé»˜è®¤ï¼‰- åŒ¹é…åŒ…å«è¯¥æ¨¡å¼çš„ä»»ä½•è·¯å¾„
opencode-usage analyze -p github
opencode-usage analyze --project my-app

# ç²¾ç¡®è·¯å¾„åŒ¹é… - åŒ¹é…ç‰¹å®šçš„ç›®å½•è·¯å¾„
opencode-usage analyze -p /Users/yourname/projects/my-app --exact-path
opencode-usage analyze -p ~/projects/my-app --exact-path

# ä¸å®ä¾‹ç»“åˆä½¿ç”¨æŸ¥çœ‹æ˜ç»†
opencode-usage analyze -p ~/projects/my-app --exact-path --instances
```

### æ˜¾ç¤ºä¼šè¯æ˜ç»†

```bash
opencode-usage analyze --sessions
```

### æŒ‰è·¯å¾„/å®ä¾‹åˆ†ç»„

```bash
# åˆ†æå‘½ä»¤ - æŒ‰é¡¹ç›®è·¯å¾„æ˜¾ç¤ºä½¿ç”¨æƒ…å†µæ˜ç»†
opencode-usage analyze --instances

# æ¯æ—¥æŠ¥å‘Š - æŒ‰é¡¹ç›®è·¯å¾„æ˜¾ç¤ºä½¿ç”¨æƒ…å†µæ˜ç»†
opencode-usage daily --instances

# æ¯æœˆæŠ¥å‘Š - æŒ‰é¡¹ç›®è·¯å¾„æ˜¾ç¤ºä½¿ç”¨æƒ…å†µæ˜ç»†
opencode-usage monthly --instances

# ä¸å…¶ä»–è¿‡æ»¤å™¨ç»“åˆä½¿ç”¨
opencode-usage analyze -d 30 -m sonnet --instances

# ä¸ç²¾ç¡®è·¯å¾„åŒ¹é…ç»“åˆä½¿ç”¨
opencode-usage analyze -p /Users/yourname/projects/my-app --exact-path --instances
```

### å¯¼å‡ºæ ¼å¼

```json
# JSON è¾“å‡º
opencode-usage analyze --json > usage.json

# CSV è¾“å‡º
opencode-usage analyze --csv > usage.csv
```

### æ¯æ—¥æŠ¥å‘Š

```bash
# æœ€è¿‘ 7 å¤©ï¼ˆé»˜è®¤ï¼‰
opencode-usage daily

# æœ€è¿‘ 30 å¤©
opencode-usage daily -d 30

# æŒ‰æ¨¡å‹åˆ†ç»„
opencode-usage daily --breakdown

# æŒ‰é¡¹ç›®/å®ä¾‹åˆ†ç»„
opencode-usage daily --instances
```

### æ¯æœˆæŠ¥å‘Š

```bash
# æœ€è¿‘ 30 å¤©ï¼ˆé»˜è®¤ï¼‰
opencode-usage monthly

# æœ€è¿‘ 90 å¤©
opencode-usage monthly -d 90

# æŒ‰æ¨¡å‹åˆ†ç»„
opencode-usage monthly --breakdown

# æŒ‰é¡¹ç›®/å®ä¾‹åˆ†ç»„
opencode-usage monthly --instances
```

### æ€»ä½“æ‘˜è¦

```bash
opencode-usage summary -d 30
```

### åå‘æ’åºï¼ˆä»æœ€æ—§åˆ°æœ€æ–°ï¼‰

```bash
opencode-usage analyze --reverse
```

### å¸®åŠ©

```bash
opencode-usage --help
```

## ç¤ºä¾‹è¾“å‡º

### æ‘˜è¦æŠ¥å‘Š
```
ğŸ“Š OpenCode Usage Analysis

Summary:
  Total Sessions: 45
  Total Messages: 312
  Date Range: 2026-01-01 to 2026-01-07

Token Usage:
  Input: 150.5K
  Output: 250.8K
  Reasoning: 50.2K
  Cache Read: 500.1K
  Cache Write: 25.3K

Costs:
  Total Cost: $5.2341
  Avg Cost per Session: $0.1163
  Avg Cost per Message: $0.0168

 By Model:
   claude-sonnet-4-5-20250929: $3.1234 (59.7%) - 350.2K tokens
   claude-3-5-haiku-20241022: $1.2345 (23.6%) - 450.5K tokens
   claude-opus-4-5: $0.8762 (16.7%) - 156.2K tokens

By Path (when using --instances):
   /Users/yourname/projects/my-app: 20 sessions, 250.3K tokens, $3.1234 (59.7%)
   /Users/yourname/projects/another-app: 15 sessions, 150.2K tokens, $1.2345 (23.6%)
   /Users/yourname/projects/experiment: 10 sessions, 156.2K tokens, $0.8762 (16.7%)
```

### æ¯æ—¥æŠ¥å‘Šï¼ˆè¡¨æ ¼æ ¼å¼ï¼‰
```
ğŸ“Š OpenCode Usage Report - Daily

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date      â”‚ Models          â”‚ Input    â”‚ Output  â”‚ Cache Cre.â”‚ Cache Readâ”‚ Total Tkn.â”‚ Cost (USD)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07â”‚ sonnet-4-5     â”‚ 15,234   â”‚ 25,456  â”‚ 2,123     â”‚ 50,234    â”‚ 93,047     â”‚ $1.23     â”‚
â”‚ 2026-01-06â”‚ haiku-3-5       â”‚ 12,567   â”‚ 18,234  â”‚ 1,234     â”‚ 40,123    â”‚ 72,158     â”‚ $0.89     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total     â”‚                 â”‚ 27,801   â”‚ 43,690  â”‚ 3,357     â”‚ 90,357    â”‚ 165,205    â”‚ $2.12     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¯æ—¥æŠ¥å‘Šï¼ˆç´§å‡‘æ¨¡å¼ - çª„ç»ˆç«¯ï¼‰
```
ğŸ“Š OpenCode Usage Report - Daily

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date      â”‚ Models          â”‚ Input    â”‚ Output  â”‚ Cost (USD)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07â”‚ sonnet-4-5     â”‚ 15,234   â”‚ 25,456  â”‚ $1.23     â”‚
â”‚ 2026-01-06â”‚ haiku-3-5       â”‚ 12,567   â”‚ 18,234  â”‚ $0.89     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total     â”‚                 â”‚ 27,801   â”‚ 43,690  â”‚ $2.12     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 Running in Compact Mode
 Expand terminal width to see cache metrics and total tokens
```

### æ¯æ—¥æŠ¥å‘Šï¼ˆæŒ‰è·¯å¾„åˆ†ç»„ - ä½¿ç”¨ --instancesï¼‰
```
ğŸ“Š OpenCode Usage Report - Daily

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date                    â”‚ Models                                â”‚    Input â”‚   Output â”‚    Cache â”‚    Cache â”‚    Total â”‚     Cost â”‚
â”‚                         â”‚                                       â”‚          â”‚          â”‚   Create â”‚     Read â”‚   Tokens â”‚    (USD) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Project:                â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ /Users/yourname/proj1   â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07              â”‚ - sonnet-4-5                          â”‚  15,234  â”‚  25,456  â”‚   2,123  â”‚  50,234  â”‚  93,047  â”‚   $1.23  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Project:                â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ /Users/yourname/proj2   â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07              â”‚ - haiku-3-5                           â”‚ 12,567  â”‚  18,234  â”‚   1,234  â”‚  40,123  â”‚  72,158  â”‚   $0.89  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total                   â”‚                                       â”‚  27,801  â”‚  43,690  â”‚   3,357  â”‚  90,357  â”‚ 165,205  â”‚   $2.12  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æ¥æº

è¯¥å·¥å…·ä»ä»¥ä¸‹ä½ç½®è¯»å– OpenCode ä¼šè¯æ•°æ®ï¼š
- æ¶ˆæ¯ï¼š`~/.local/share/opencode/storage/message/`
- ä¼šè¯ï¼š`~/.local/share/opencode/storage/session/`

## è®¸å¯è¯

MIT
