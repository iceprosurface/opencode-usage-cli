[English](README.md) | [ä¸­æ–‡](README.zh-CN.md)

# OpenCode Usage

ä¸€ä¸ªç”¨äºåˆ†æ OpenCode ä¼šè¯ä½¿ç”¨æƒ…å†µå’Œæˆæœ¬çš„ CLI å·¥å…·ï¼Œç±»ä¼¼äº ccusageã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š è·¨ä¼šè¯åˆ†æ token ä½¿ç”¨æƒ…å†µ
- ğŸ’° æŒ‰æ¨¡å‹å’Œä¼šè¯è¿½è¸ªæˆæœ¬
- ğŸ“… æ¯æ—¥å’Œæ¯æœˆä½¿ç”¨æŠ¥å‘Š
- ğŸ“ˆ å¸¦ç´§å‡‘æ¨¡å¼çš„å“åº”å¼è¡¨æ ¼
- ğŸ” æŒ‰æ—¶é—´èŒƒå›´ã€æ¨¡å‹å’Œé¡¹ç›®è·¯å¾„è¿‡æ»¤
- ğŸ¯ ç‰¹å®šç›®å½•çš„ç²¾ç¡®è·¯å¾„åŒ¹é…
- ğŸ—ï¸ æŒ‰é¡¹ç›®/å®ä¾‹åˆ†ç»„ä½¿ç”¨æƒ…å†µ
- ğŸ“‹ å¯¼å‡ºç»“æœä¸º JSON æˆ– CSV æ ¼å¼
- ğŸ¯ æŸ¥çœ‹è¯¦ç»†çš„ä¼šè¯æ˜ç»†

## å®‰è£…

### é€šè¿‡ npm å…¨å±€å®‰è£…

```bash
npm install -g opencode-usage-cli
```

### æˆ–æœ¬åœ°å®‰è£…

```bash
npm install opencode-usage-cli
```

## ä½¿ç”¨æ–¹æ³•

ä½¿ç”¨ `npx opencode-usage-cli`ï¼ˆæ— éœ€å®‰è£…ï¼‰æˆ–å…¨å±€å®‰è£…åçš„ `opencode-usage` å‘½ä»¤ã€‚

### åˆ†æä½¿ç”¨æƒ…å†µï¼ˆæœ€è¿‘ 7 å¤©ï¼‰

```bash
npx opencode-usage-cli analyze
```

### æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤

```bash
# æœ€è¿‘ 30 å¤©
npx opencode-usage-cli analyze -d 30

# æœ€è¿‘ 90 å¤©
npx opencode-usage-cli analyze --days 90
```

### æŒ‰æ¨¡å‹è¿‡æ»¤

```bash
# ä»… Claude Sonnet
npx opencode-usage-cli analyze -m sonnet

# ä»… Haiku
npx opencode-usage-cli analyze --model haiku
```

### æŒ‰é¡¹ç›®è·¯å¾„è¿‡æ»¤

```bash
# æ¨¡å¼åŒ¹é…ï¼ˆé»˜è®¤ï¼‰- åŒ¹é…åŒ…å«è¯¥æ¨¡å¼çš„ä»»ä½•è·¯å¾„
npx opencode-usage-cli analyze -p github
npx opencode-usage-cli analyze --project my-app

# ç²¾ç¡®è·¯å¾„åŒ¹é… - åŒ¹é…ç‰¹å®šçš„ç›®å½•è·¯å¾„
npx opencode-usage-cli analyze -p /Users/yourname/projects/my-app --exact-path
npx opencode-usage-cli analyze -p ~/projects/my-app --exact-path

# ä¸å®ä¾‹ç»“åˆä½¿ç”¨æŸ¥çœ‹æ˜ç»†
npx opencode-usage-cli analyze -p ~/projects/my-app --exact-path --instances
```

### æŒ‰å½“å‰å·¥ä½œç›®å½•è¿‡æ»¤

```bash
# ä»…æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„ä¼šè¯
npx opencode-usage-cli analyze --current-only
npx opencode-usage-cli daily --current-only
npx opencode-usage-cli monthly --current-only

# ä¸æ—¶é—´èŒƒå›´ç»“åˆä½¿ç”¨
npx opencode-usage-cli analyze -d 30 --current-only
```

### æ˜¾ç¤ºä¼šè¯æ˜ç»†

```bash
npx opencode-usage-cli analyze --sessions
```

### æŒ‰è·¯å¾„/å®ä¾‹åˆ†ç»„

```bash
# åˆ†æå‘½ä»¤ - æŒ‰é¡¹ç›®è·¯å¾„æ˜¾ç¤ºä½¿ç”¨æƒ…å†µæ˜ç»†
npx opencode-usage-cli analyze --instances

# æ¯æ—¥æŠ¥å‘Š - æŒ‰é¡¹ç›®è·¯å¾„æ˜¾ç¤ºä½¿ç”¨æƒ…å†µæ˜ç»†
npx opencode-usage-cli daily --instances

# æ¯æœˆæŠ¥å‘Š - æŒ‰é¡¹ç›®è·¯å¾„æ˜¾ç¤ºä½¿ç”¨æƒ…å†µæ˜ç»†
npx opencode-usage-cli monthly --instances

# ä¸å…¶ä»–è¿‡æ»¤å™¨ç»“åˆä½¿ç”¨
npx opencode-usage-cli analyze -d 30 -m sonnet --instances

# ä¸ç²¾ç¡®è·¯å¾„åŒ¹é…ç»“åˆä½¿ç”¨
npx opencode-usage-cli analyze -p /Users/yourname/projects/my-app --exact-path --instances
```

### å¯¼å‡ºæ ¼å¼

```bash
# JSON è¾“å‡º
npx opencode-usage-cli analyze --json > usage.json

# CSV è¾“å‡º
npx opencode-usage-cli analyze --csv > usage.csv
```

### æ¯æ—¥æŠ¥å‘Š

```bash
# æœ€è¿‘ 7 å¤©ï¼ˆé»˜è®¤ï¼‰
npx opencode-usage-cli daily

# æœ€è¿‘ 30 å¤©
npx opencode-usage-cli daily -d 30

# æŒ‰æ¨¡å‹åˆ†ç»„
npx opencode-usage-cli daily --breakdown

# æŒ‰é¡¹ç›®/å®ä¾‹åˆ†ç»„
npx opencode-usage-cli daily --instances
```

### æ¯æœˆæŠ¥å‘Š

```bash
# æœ€è¿‘ 30 å¤©ï¼ˆé»˜è®¤ï¼‰
npx opencode-usage-cli monthly

# æœ€è¿‘ 90 å¤©
npx opencode-usage-cli monthly -d 90

# æŒ‰æ¨¡å‹åˆ†ç»„
npx opencode-usage-cli monthly --breakdown

# æŒ‰é¡¹ç›®/å®ä¾‹åˆ†ç»„
npx opencode-usage-cli monthly --instances
```

### æ€»ä½“æ‘˜è¦

```bash
npx opencode-usage-cli summary -d 30
```

### åå‘æ’åºï¼ˆä»æœ€æ—§åˆ°æœ€æ–°ï¼‰

```bash
npx opencode-usage-cli analyze --reverse
```

### å¸®åŠ©

```bash
npx opencode-usage-cli --help
```

## ç¤ºä¾‹è¾“å‡º

### æ‘˜è¦æŠ¥å‘Š
```
ğŸ“Š OpenCode Usage Analysis

Summary:
  Total Sessions: 45
  Total Messages: 312
  Date Range: 2026-01-01 to 2026-01-07

Token Usage:
  Input: 150.5K
  Output: 250.8K
  Reasoning: 50.2K
  Cache Read: 500.1K
  Cache Write: 25.3K

Costs:
  Total Cost: $5.2341
  Avg Cost per Session: $0.1163
  Avg Cost per Message: $0.0168

 By Model:
   claude-sonnet-4-5-20250929: $3.1234 (59.7%) - 350.2K tokens
   claude-3-5-haiku-20241022: $1.2345 (23.6%) - 450.5K tokens
   claude-opus-4-5: $0.8762 (16.7%) - 156.2K tokens

By Path (when using --instances):
   /Users/yourname/projects/my-app: 20 sessions, 250.3K tokens, $3.1234 (59.7%)
   /Users/yourname/projects/another-app: 15 sessions, 150.2K tokens, $1.2345 (23.6%)
   /Users/yourname/projects/experiment: 10 sessions, 156.2K tokens, $0.8762 (16.7%)
```

### æ¯æ—¥æŠ¥å‘Šï¼ˆè¡¨æ ¼æ ¼å¼ï¼‰
```
ğŸ“Š OpenCode Usage Report - Daily

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date      â”‚ Models          â”‚ Input    â”‚ Output  â”‚ Cache Cre.â”‚ Cache Readâ”‚ Total Tkn.â”‚ Cost (USD)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07â”‚ sonnet-4-5     â”‚ 15,234   â”‚ 25,456  â”‚ 2,123     â”‚ 50,234    â”‚ 93,047     â”‚ $1.23     â”‚
â”‚ 2026-01-06â”‚ haiku-3-5       â”‚ 12,567   â”‚ 18,234  â”‚ 1,234     â”‚ 40,123    â”‚ 72,158     â”‚ $0.89     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total     â”‚                 â”‚ 27,801   â”‚ 43,690  â”‚ 3,357     â”‚ 90,357    â”‚ 165,205    â”‚ $2.12     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¯æ—¥æŠ¥å‘Šï¼ˆç´§å‡‘æ¨¡å¼ - çª„ç»ˆç«¯ï¼‰
```
ğŸ“Š OpenCode Usage Report - Daily

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date      â”‚ Models          â”‚ Input    â”‚ Output  â”‚ Cost (USD)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07â”‚ sonnet-4-5     â”‚ 15,234   â”‚ 25,456  â”‚ $1.23     â”‚
â”‚ 2026-01-06â”‚ haiku-3-5       â”‚ 12,567   â”‚ 18,234  â”‚ $0.89     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total     â”‚                 â”‚ 27,801   â”‚ 43,690  â”‚ $2.12     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 Running in Compact Mode
 Expand terminal width to see cache metrics and total tokens
```

### æ¯æ—¥æŠ¥å‘Šï¼ˆæŒ‰è·¯å¾„åˆ†ç»„ - ä½¿ç”¨ --instancesï¼‰
```
ğŸ“Š OpenCode Usage Report - Daily

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date                    â”‚ Models                                â”‚    Input â”‚   Output â”‚    Cache â”‚    Cache â”‚    Total â”‚     Cost â”‚
â”‚                         â”‚                                       â”‚          â”‚          â”‚   Create â”‚     Read â”‚   Tokens â”‚    (USD) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Project:                â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ /Users/yourname/proj1   â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07              â”‚ - sonnet-4-5                          â”‚  15,234  â”‚  25,456  â”‚   2,123  â”‚  50,234  â”‚  93,047  â”‚   $1.23  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Project:                â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ /Users/yourname/proj2   â”‚                                       â”‚          â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2026-01-07              â”‚ - haiku-3-5                           â”‚ 12,567  â”‚  18,234  â”‚   1,234  â”‚  40,123  â”‚  72,158  â”‚   $0.89  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total                   â”‚                                       â”‚  27,801  â”‚  43,690  â”‚   3,357  â”‚  90,357  â”‚ 165,205  â”‚   $2.12  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æ¥æº

æœ¬å·¥å…·è‡ªåŠ¨æ£€æµ‹å¹¶æ”¯æŒæ–°æ—§ä¸¤ç§ OpenCode æ•°æ®æ ¼å¼ï¼š

### æ–°æ ¼å¼ï¼ˆSQLiteï¼‰- æ¨è
- æ•°æ®åº“ï¼š`~/.local/share/opencode/opencode.db`
- ç”¨äº OpenCode v2.0+ï¼ˆ2026å¹´2æœˆåŠä»¥åï¼‰
- SQLite ç´¢å¼•åŠ é€ŸæŸ¥è¯¢ï¼Œæ€§èƒ½æ›´å¥½
- å•ä¸€æ•°æ®åº“æ–‡ä»¶

### æ—§æ ¼å¼ï¼ˆJSONï¼‰- å‘åå…¼å®¹
- æ¶ˆæ¯ï¼š`~/.local/share/opencode/storage/message/`
- ä¼šè¯ï¼š`~/.local/share/opencode/storage/session/`
- ç”¨äºæ—§ç‰ˆ OpenCode

å·¥å…·ä¼šè‡ªåŠ¨ä¼˜å…ˆä½¿ç”¨ SQLiteï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å›é€€åˆ° JSON æ–‡ä»¶ã€‚

## OpenCode é›†æˆ

ä½ å¯ä»¥å°†æ­¤å·¥å…·é›†æˆä¸º OpenCode skillï¼Œæ–¹ä¾¿éšæ—¶è°ƒç”¨ã€‚

### å¿«é€Ÿé…ç½®

1. åˆ›å»º skill ç›®å½•ï¼š

```bash
mkdir -p ~/.config/opencode/skills/opencode-usage
```

2. åˆ›å»º `SKILL.md` æ–‡ä»¶ï¼š

```bash
cat > ~/.config/opencode/skills/opencode-usage/SKILL.md << 'EOF'
---
name: opencode-usage
description: æ˜¾ç¤º OpenCode ä½¿ç”¨ç»Ÿè®¡å’Œæˆæœ¬åˆ†æ
license: MIT
---

## åŠŸèƒ½

åˆ†æ OpenCode ä¼šè¯ token ä½¿ç”¨é‡å’Œæˆæœ¬ï¼š
- æ€»ä½“æ‘˜è¦ï¼ˆanalyzeï¼‰
- æ¯æ—¥æŠ¥å‘Šï¼ˆdailyï¼‰
- æ¯æœˆæŠ¥å‘Šï¼ˆmonthlyï¼‰

## ä½¿ç”¨åœºæ™¯

å½“ç”¨æˆ·è¯¢é—®ä»¥ä¸‹å†…å®¹æ—¶ä½¿ç”¨æ­¤ skillï¼š
- ä½¿ç”¨ç»Ÿè®¡
- token æ¶ˆè€—
- æˆæœ¬åˆ†æ
- æ¨¡å‹ä½¿ç”¨æƒ…å†µ

## å‘½ä»¤

```bash
npx opencode-usage-cli <command> --json [options]
```

> **é‡è¦**ï¼šä½œä¸º AI è°ƒç”¨æ—¶ï¼Œ**å¿…é¡»å§‹ç»ˆä½¿ç”¨ `--json` å‚æ•°**ï¼Œä»¥ä¾¿è·å¾—ç»“æ„åŒ–æ•°æ®ï¼Œä¾¿äºè§£æå’Œå±•ç¤ºã€‚

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| analyze --json | æ€»ä½“æ‘˜è¦ï¼ˆé»˜è®¤ 7 å¤©ï¼‰ |
| daily --json | æ¯æ—¥æŠ¥å‘Š |
| monthly --json | æ¯æœˆæŠ¥å‘Š |

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| --json | **AI è°ƒç”¨æ—¶å¿…é¡»** - JSON æ ¼å¼è¾“å‡ºï¼Œä¾¿äºè§£æ |
| -d, --days <n> | æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ |
| -m, --model <pattern> | æŒ‰æ¨¡å‹è¿‡æ»¤ |
| --breakdown | æ˜¾ç¤ºæ¨¡å‹æ˜ç»† |
| --instances | æŒ‰é¡¹ç›®åˆ†ç»„ |
| --current-only | ä»…å½“å‰ç›®å½• |

## ç¤ºä¾‹

```bash
# 7 å¤©æ‘˜è¦ï¼ˆAI è°ƒç”¨ï¼‰
npx opencode-usage-cli analyze --json

# 30 å¤©æ‘˜è¦
npx opencode-usage-cli analyze --json -d 30

# æ¯æ—¥æŠ¥å‘Š + æ¨¡å‹æ˜ç»†
npx opencode-usage-cli daily --json --breakdown

# æŒ‰é¡¹ç›®åˆ†ç»„
npx opencode-usage-cli daily --json --instances
```
EOF
```

3. é‡å¯ OpenCode æˆ–å¼€å§‹æ–°ä¼šè¯ã€‚

4. ç°åœ¨å¯ä»¥ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€è¯¢é—®ï¼š
   - "æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡"
   - "ä»Šå¤©ç”¨äº†å¤šå°‘ token"
   - "è¿™ä¸ªæœˆçš„æˆæœ¬åˆ†æ"
   - "Show usage report"

OpenCode ä¼šè‡ªåŠ¨åŠ è½½ skill å¹¶æ‰§è¡Œç›¸åº”å‘½ä»¤ã€‚

## è®¸å¯è¯

MIT
